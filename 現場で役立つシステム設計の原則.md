---
tags: book
---

# 現場で役立つシステム設計の原則

リンク: [現場で役立つシステム設計の原則 〜変更を楽で安全にするオブジェクト指向の実践技法 | 増田 亨 | コンピュータサイエンス | Kindleストア | Amazon](https://www.amazon.co.jp/dp/B073GSDBGT/ref=dp-kindle-redirect?_encoding=UTF8&btkr=1)

## 1章 小さくまとめて分かりやすくする

- コードを改善をするための方法、P20
	- 命名、説明変数、メソッドを抽出する
	- 関数やクラスを小さく保つ
	- それぞれの部品を分かりやすくする（命名、短いコード）
	- 重複をなくす（同じ処理は1箇所にまとめる）
- 不正な値が入るのを防ぐために、Value Objectを作る、P41
	- 価格、量、電話番号など
- 配列とそれに対する処理を1箇所に集めるために、コレクションオブジェクトを作る、P50

### 1章まとめ

- [良いコードを書くための設計レベルとロジックレベルの改善](良いコードを書くための設計レベルとロジックレベルの改善.md)
- [Entityにgetterをもたせるのが推奨されない理由](Entityにgetterをもたせるのが推奨されない理由.md)
	- そもそもデータと処理を1つにまとめるのは、（そのデータを使う）同じ処理が複数の箇所に散らばらないようにするため
	- getterをもたせると、そのデータを使う処理がクラス外に書かれる可能性が生まれる

## 2章

- 区分オブジェクトを作ると、条件分岐を簡潔に記述することができる、P68
- 状態の遷移ルールをクラスを使って記述する、P81
- 本書で紹介されている区分オブジェクトの実装に対する批判
	- [PHP Mentors — 「現場で役立つシステム設計の原則」批判 (2) ～ポリモーフィズムは何のために？～](https://phpmentors.jp/post/165184612628/%E5%A2%97%E7%94%B0%E4%BA%A8%E6%B0%8F%E3%81%AE%E7%8F%BE%E5%A0%B4%E3%81%A7%E5%BD%B9%E7%AB%8B%E3%81%A4%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E8%A8%AD%E8%A8%88%E3%81%AE%E5%8E%9F%E5%89%87%E6%89%B9%E5%88%A4%E3%81%AE%E7%AC%AC%EF%BC%92%E7%B7%A8%E3%81%A7%E3%81%99-%EF%BC%92%E3%83%9D%E3%83%AA%E3%83%A2%E3%83%95%E3%82%A3%E3%82%BA%E3%83%A0%E3%81%AF%E4%BD%95%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AB)
	- 区分オブジェクトをPHPでどう実装するかを考えるときに役立ちそう

## 4章

- パッケージの参照関係が業務の流れと対応する、P114
- データと処理を分けるから、処理が色々な場所に書かれて分かりにくくなる
	- 業務で使うデータとそれを使う処理をまとめたもの = ドメインオブジェクト
	- 関連するドメインオブジェクトをまとめたもの = パッケージ、ドメインモデル
- 人間の「やりたいこと」とプログラミングの単位を一致させる、P123
	- 🐵これを具体的にどうするのか、なぜするのか、どういうメリットがあるのかはまだ分かっていない
- ドメインモデリングは、詳細から作るボトムアップの方法が向いている、P137
	- 結局は両方が必要になるけど
	- 全体を把握するための道具 = パッケージ図、業務フロー図
- ある機能だけで使えるオブジェクトを作るのではなく、色々なデータとデータに関するロジックをまとめて色々な機能で使えるようにする
	- PKMにおける、知識と文脈との関係と同じ（単一責任の原則の由来）

### 4章まとめ

- パッケージの依存関係と業務の前後関係はちょうど逆になる（面白い）
	- AのあとにBをするということは、BをするためにAが必要ということなので、プログラムするときはBはAに依存する
- データとデータを使う処理（判断・加工・計算）をまとめることで、ロジックが色々な箇所に散らばることを防ぐことができる
- またそのようにして作ったクラス（ドメインオブジェクト）は、色々な文脈で使うことができる
