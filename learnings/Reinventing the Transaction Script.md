# Reinventing the Transaction Script

リンク: https://www.youtube.com/watch?v=USSkidmaS6w

## 作成したノート

- [関数型のトランザクションスクリプトがなぜよいか](関数型のトランザクションスクリプトがなぜよいか.md)
- [関数型でバックエンドサービスを作るときのデプロイの種類](関数型でバックエンドサービスを作るときのデプロイの種類.md)

## まとめ

各章では、関数型プログラミングについて・DDDについて・Functional DDDについて・デプロイについて説明されています。

関数型のトランザクションスクリプトは素晴らしいという主張がされています。なぜかというと、ワークフローが単方向で理解しやすく、（従来のトランザクションスクリプトの問題である）テスト容易性・変更容易性・再利用性の低さを改善しているからです。

**関数型プログラミングのコアとなる考え方は、レゴと同じように小さな部品を集めて機能を作ること**です。部品は関数と型の2つがあります。

関数は出力と入力が同じであれば、トンネルのようにつなぐことができます。型はorを表すユニオン型と、andを表すレコード型を組み合わせて、複雑な型を表現することができます（代数的データ型 = Composable Type System）。

## メモ

### Part3

- DDDの考え方
    - デザインとコードを一致させること（型でモデリングするとできる）
    - まず前段階としてアジャイルがある（25:09〜）
        - 開発者とドメインエキスパートがやりとりし、開発者がコードを書いてアプリケーションを作り、ドメインエキスパートがレビューする
        - →開発者が翻訳するのではなく、共有のメンタルモデルをみんなでつくって、それをもとにコードを書く（ドメインモデル = コード）
- F#の型で表現したモデルを、非開発者が見たときに以下のことができるか
    - 理解できるか？→できる（日本人の場合は、英語が壁になるかもしれない）
    - 有益なフィードバックができるか？→できる
- 境界づけられたコンテキスト（DDDの重要な概念）（33:19〜）
    - 35:05〜続き

### Part 4

- オブジェクト指向と関数型プログラミングの依存を比較した図
    - オブジェクト指向の依存は循環している
        - 我々はなぜオブジェクトに振る舞いを持たせてしまったのだろうという気持ちになった
    - →マイクロサービスではサイクルの依存はしないよね？なぜ小さい部品を作るときはそうするの？みたいなことを言っていた気がする
- Functional Transaction Scriptはオニオンアーキテクチャ、クリーンアーキテクチャ、ヘキサゴナルアーキテクチャなどの進化系である
    - レイヤードアーキテクチャの問題点
        - 修正がすべてのレイヤーにまたがりがち
        - →縦に切ったほうがいい
- テスト容易性について（53:00~にテストの原則が書かれている）
    - 中心にあるロジックは決定的なので、テストしやすい

### Part 5

- デプロイについて
    - モノリス
        - コンテキストごとにモジュールを分ける
    - SOA（Service Oriented Architecture）←マイクロサービスなど
        - コンテキストごとにコンテナを分ける
    - サーバーレス
        - ワークフローごとにデプロイする
- モジュラモノリスを作れなければ、マイクロサービスはつくれない（58:00）
    - なぜならそれは同じ原則でできているから
    - マイクロサービスが解決するのは、デザインではなくデプロイ