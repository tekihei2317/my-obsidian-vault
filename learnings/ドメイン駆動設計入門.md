# ドメイン駆動設計入門

リンク: [ドメイン駆動設計入門 ボトムアップでわかる！ドメイン駆動設計の基本 | 成瀬 允宣 | コンピュータ・IT | Kindleストア | Amazon](https://www.amazon.co.jp/dp/B082WXZVPC/ref=dp-kindle-redirect?_encoding=UTF8&btkr=1)

## 第1章

- モデリングの話では、必要なものと不要なものを分ける、抽象化するという話が出てくる、P31
	- 用語集を作ることは抽象化になるのか？
- [DDDで実装するときの実装パターン一覧](DDDで実装するときの実装パターン一覧.md)

## 第2章

- [値オブジェクトをなぜ作るのか？](値オブジェクトをなぜ作るのか？.md)
- 値オブジェクトにする基準は「ルールが存在するか？」「それ単体で扱うか？」、P66
- 値オブジェクトを作るメリットの1つは、表現力が増すから、P76
	- これは大きなメリットだと思う
	- 例えば製品番号だと、使う側はstring型で渡されるより製品番号クラスのインスタンスを渡されたほうが安心できる

## 第3章

なぜ？という問いに答えるのは難しいのかなぁと思いました。最初は理解が浅いので、ぱっとしない理由しか出てこないです。

エンティティをなぜ作るのか？→エンティティをどうやって作るのか？

- 値オブジェクトとエンティティの違いは、属性で区別されるか同一性で区別されるかどうか、P94
- エンティティのIDは不変なので、readonlyにする
- ドキュメントはマクロな仕様、コードはミクロな仕様を知るために役に立つ、P109
- ドメインオブジェクトを作ることで、業務ルールの変更に対応しやすくなる

## 第12章

- 集約の定義
	- 集約は、不変条件（満たされるべき条件）があるオブジェクトの集まりのこと
	- 集約を代表するオブジェクトを集約ルート（root）と呼ぶ
	- 集約を操作するときは、集約ルートを経由して操作する（集約ルートをインターフェイスとする）
- 集約は変更の単位で作る、P418
	- 変更の単位より大きい集約を作ると、溢れた部分を更新する処理が複数の場所に書かれるため
	- 小さくすることに対するポイントは？→P430
		- 更新さえできれば、小さくすることにデメリットはないのかな？
- 通知オブジェクトを使ってプロパティをプライベートに保つ、P418
	- 通知オブジェクト = データモデルのビルダー
	- エンティティに通知オブジェクトを渡して、通知オブジェクトにプライベートプロパティを渡す
		- 通知オブジェクトがデータモデルを構築する
	- データモデルが簡単に作れるなら、エンティティから直接データモデルを作ればよさそう

## 第13章

- 仕様 = ルールオブジェクト
- オブジェクトの評価処理（〜かどうか）を複数オブジェクトに追加すると、オブジェクトの責任が分かりにくくなる、P442
- リポジトリに複雑な条件が記述されるのを防ぐための手段2つ
	- アプリケーション側で処理するか、SQLで処理するかのどちらか
	- 全件取得して、ルールオブジェクトを使ってフィルタリングする、P453
		- メリット = 業務知識を閉じ込められる、デメリット = パフォーマンス
		- LINQのWhereが便利そう
	- リードモデルを使ってSQLで処理する
		- メリット = パフォーマンス、デメリット = リードモデルにロジックが流出する
