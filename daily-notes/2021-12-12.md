# 2021-12-12

## ダッシュボードのバッチ処理を実装する

バッチが失敗したときのことを考慮して、過去1週間分のデータを更新するようにする。

15:07 ハッキングされてて草

多分DBに直接アクセスできるようになっていると思う...（ポートが公開されている）パスワードもとりあえず単純
なものにしていたので、IPとパスワードのブルートフォースくらって死んだと思う。

14:26 crontabをどうやって管理するか

コンテナだとcron実行できないのかな？（良くわかってない）

Node.jsでcronっぽいものを使うには[node-cron](https://github.com/node-cron/node-cron)と[node-schedule/node-schedule: A cron-like and not-cron-like job scheduler for Node.](https://github.com/node-schedule/node-schedule)の2つがあって、node-scheduleのほうがスター数が多く最近も更新が続いているみたいなのでそちらを使うことにした。

## Scratchで単語を1文字ずつ入力できるようにする

まず、文字を画面に表示する方法がわからない...笑。Scratchでは、ゲームに登場するものはスプライトなので、文字もスプライトとして扱わなければいけないのだろうか？

10:33 イベントを動的に定義したい

aが押されたときに「入力チェック（a）」、bが押されたときに「入力チェック(b)」、...のように26個ぶん定義しているので、これを簡略化したい。

あと、ある状態のときのみ有効なイベントを定義したい（例えばプレイ中のみ等）。現在はプレイ画面以外でも入力チェックが有効になっているので、キーを押すと不正解音が鳴るようになっている。ブロック定義に条件分岐を入れるのはブロック定義が汚くなるので避けたい。
