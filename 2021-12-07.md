# 2021-12-07

## プロジェクト進捗一覧の実装

17:49 PHPを全然知らない

コールバックの`use`ってどういう意味だっけ？（コールバックの中から外のスコープにアクセスできないからだったはず）
関数にオブジェクト渡したときって、オブジェクト変更するともとの値に反映される？（書き換えたときに複製ｍされるんじゃなかったかなぁ、&つけて渡すと参照渡しになったはず）

16:44 クエリビルダのwhereの条件を配列で指定できたはず

なんかアーキテクチャの議論のところで見た気がするのだけれど、どこで見たか忘れてしまった。2
[LaravelでEloquentを使用して複数のWhere句クエリを作成する方法](https://leben.mobi/blog/laravel_multi_where/php/)

16:22 プロジェクト進捗一覧の検索機能の実装

まずは仕様を決める。多分これで大丈夫という結論になった。

15:24 Docker for Macの調子が悪いのが、著しく開発体験を損ねている

`cached`つけてからおかしいな...。マイグレーションができなくなったり、downしてもコンテナ落ちなかったり、timeoutのアレが出たり。全部Docker Daemon再起動したら直るんだけど、なんだこれ。

13:44 SQLでSUM取ったときに、nullになったり、文字列になったりする問題

`(int)null`が`0`になるので、アプリケーション側`int`でキャストしてあげると解決する（LaravelのAPIリソースでやっている）

---

10:06 Factoryで連番を生成する方法について

Fakerには用意されていないが、`static`なプロパティ（クラス変数）を使えば出来る[Laravel8で完成されたModelFactoryの使い方 - Qiita](https://qiita.com/ucan-lab/items/788d1a603f2b53ebb999)

10:31 staticなメソッドの呼び出し方がわからない

`$this->method`？`self::method`？どっちでもいいのかな？

10:45 selectでasを書く位置について

`'column as alias'`にしないといけないのかな、`['alias' => 'column']`にしたい。ソースコードちょっとみたかんじ、これはサブクエリのときだけかもしれない。

11:03 モデルから特定のキーを抽出する

`toArray`してから`array_intersect_key`を使用することにした。モデルにそういうメソッドある気がするが...。[phpの配列から特定のキーのみ残す | つくるログ](http://shingaki.me/web/php%E3%81%AE%E9%85%8D%E5%88%97%E3%81%8B%E3%82%89%E7%89%B9%E5%AE%9A%E3%81%AE%E3%82%AD%E3%83%BC%E3%81%AE%E3%81%BF%E6%AE%8B%E3%81%99/)

12:04 SQLでsumで取得するとstringが返ってくる

知らなかった。とりあえずテスト通るからいいか...。
[[Laravel]Eloquentでsum()を使うと、stringが返される | akamist blog](https://akamist.com/blog/archives/3882)