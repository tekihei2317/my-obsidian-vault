# SPAでの認証方法と基本的なセキュリティ対策の概要

SPAの認証方法には、JWTなどのトークンを使った認証と、MPAと同じようにセッションを使った認証の大きく2パターンがあります。

セキュリティ対策では、主に`XSS`と`CSRF`を考慮します。この2つの考慮すると、以下のことが言えます。

- 万が一XSSが起きた場合に認証情報が盗まれないように、認証情報はJavaScriptでアクセスできない場所に置く
	- →ローカルストレージはNGで、HttpOnlyのクッキーに入れる
- クッキーに入れる場合は、CSRFが起こりうるので対策する必要がある
	- 対策には、トークンを使う・カスタムヘッダを使う・SameSite Cookieを使う・Originを使うなどがあります

> 🐵 CSRFトークンを使う方法がまだ分かっていません（トークンの取得方法、送信方法）。MPAの場合はフォームに埋め込むと、CORSで取得できないので対策できます。

- [CSRFとは何で、どのように対策すればよいか](CSRFとは何で、どのように対策すればよいか.md)

## 参考

- [SPAのログイン認証のベストプラクティスがわからなかったのでわりと網羅的に研究してみた〜JWT or Session どっち？〜 - Qiita](https://qiita.com/Hiro-mi/items/18e00060a0f8654f49d6#session%E3%82%92%E7%94%A8%E3%81%84session%E3%81%AEcookie%E3%81%AFsamesitecookie)
- [これで完璧！今さら振り返る CSRF 対策と同一オリジンポリシーの基礎 - Qiita](https://qiita.com/mpyw/items/0595f07736cfa5b1f50c#%E5%9B%BA%E6%9C%89%E3%81%AE-http-%E3%83%98%E3%83%83%E3%83%80%E3%82%92%E6%A4%9C%E8%A8%BC%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95)
